@if(userData$ | async; as user){
<div class="container">
  <div class="row my-4">
    <div class="card border border-1 p-3">
      <div class="card-body">
        <div class="card-title">
          <h3>About Me</h3>
          <hr />
        </div>

        <!-- Display Name (derived, not directly editable here) -->
        @if(user.fname && user.lname){
        <div class="row text-center mb-3 align-items-center">
          <h6 class="col-5 text-start">Legal Name</h6>
          <p class="col-4 text-end">{{ user.displayName }}</p>
        </div>
        }

        <!-- First Name -->
        <div class="row text-center mb-3 align-items-center">
          <h6 class="col-5 text-start">First Name</h6>
          @if(isEditing && editingField === 'fname'){
          <div class="col-4">
            <input
              type="text"
              class="form-control"
              [(ngModel)]="currentValue"
            />
          </div>
          <div class="col-3 d-flex justify-content-end">
            <button class="btn btn-success btn-sm me-2" (click)="saveField()">
              Save
            </button>
            <button class="btn btn-secondary btn-sm" (click)="cancelEdit()">
              Cancel
            </button>
          </div>
          }@else {
          <p class="col-4 text-end">{{ user.fname }}</p>
          <div class="col-3 d-flex justify-content-end">
            <button
              class="btn btn-primary btn-sm"
              (click)="editField('fname', user.fname)"
            >
              Update
            </button>
          </div>
          }
        </div>

        <!-- Last Name -->
        <div class="row text-center mb-3 align-items-center">
          <h6 class="col-5 text-start">Last Name</h6>
          @if(isEditing && editingField === 'lname'){
          <div class="col-4">
            <input
              type="text"
              class="form-control"
              [(ngModel)]="currentValue"
            />
          </div>
          <div class="col-3 d-flex justify-content-end">
            <button class="btn btn-success btn-sm me-2" (click)="saveField()">
              Save
            </button>
            <button class="btn btn-secondary btn-sm" (click)="cancelEdit()">
              Cancel
            </button>
          </div>
          }@else {
          <p class="col-4 text-end">{{ user.lname }}</p>
          <div class="col-3 d-flex justify-content-end">
            <button
              class="btn btn-primary btn-sm"
              (click)="editField('lname', user.lname)"
            >
              Update
            </button>
          </div>
          }
        </div>
      </div>
    </div>
  </div>

  <div class="row my-4">
    <div class="card border border-1 p-3">
      <div class="card-body">
        <div class="card-title">
          <h3>Contact Info</h3>
          <hr />
        </div>

        <!-- Email Address -->
        <div class="row text-center mb-3 align-items-center">
          <h6 class="col-5 text-start">Email Address</h6>
          @if(isEditing && editingField === 'email'){
          <div class="col-4">
            <input
              type="email"
              class="form-control"
              [(ngModel)]="currentValue"
            />
          </div>
          <div class="col-3 d-flex justify-content-end">
            <button class="btn btn-success btn-sm me-2" (click)="saveField()">
              Save
            </button>
            <button class="btn btn-secondary btn-sm" (click)="cancelEdit()">
              Cancel
            </button>
          </div>
          }@else {
          <p class="col-4 text-end">{{ user.email }}</p>
          <div class="col-3 d-flex justify-content-end">
            <button
              class="btn btn-primary btn-sm"
              (click)="editField('email', user.email)"
            >
              Update
            </button>
          </div>
          }
        </div>
      </div>
    </div>
  </div>

  <div class="col text-center">
    <button class="btn btn-outline-success" (click)="logout()">Logout</button>
  </div>
</div>
}
